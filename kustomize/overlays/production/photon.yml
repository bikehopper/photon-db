---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: photon-db
spec:
  replicas: 1
  template:
    spec:
      containers:
      - name: photon-db
        image: ghcr.io/bikehopper/photon-db:v1.0.0-beta2
        env:
        - name: BUCKET_NAME
          value: photon-production
---
apiVersion: batch/v1
kind: CronJob
metadata:
  name: build-photon-db
spec:
  schedule: "0 4,16 * * *"
  jobTemplate:
    spec:
      backoffLimit: 1
      template:
        spec:
          containers:
          - name: photon-db
            image: ghcr.io/bikehopper/photon-db-nominatim-importer:v1.0.0-beta2
            env:
            - name: BUCKET_NAME
              value: photon-production
